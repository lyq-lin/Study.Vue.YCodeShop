{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ArrowDown, UserFilled } from \"@element-plus/icons-vue\";\nimport useAuthenticationState from '@/hook/auth/useAuthenticationState';\nimport { useRouter } from \"vue-router\";\nimport useUser from '@/stores/useUser';\nimport { onMounted, reactive, ref } from \"vue\";\nexport default {\n  __name: 'UserButton',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const isAuth = ref(useAuthenticationState());\n    const router = useRouter();\n    const User = useUser();\n    const userObj = reactive(User.user);\n    onMounted(() => {\n      setInterval(() => {\n        isAuth.value.state = ref(useAuthenticationState()).value.state;\n      }, 700);\n    });\n    function ToLogin() {\n      router.push({\n        path: '/login'\n      });\n    }\n    function ToRegister() {\n      router.push({\n        path: '/register'\n      });\n    }\n    async function Logout() {\n      await User.logout();\n      router.push({\n        path: '/login'\n      });\n    }\n    const __returned__ = {\n      isAuth,\n      router,\n      User,\n      userObj,\n      ToLogin,\n      ToRegister,\n      Logout,\n      get ArrowDown() {\n        return ArrowDown;\n      },\n      get UserFilled() {\n        return UserFilled;\n      },\n      get useAuthenticationState() {\n        return useAuthenticationState;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get useUser() {\n        return useUser;\n      },\n      onMounted,\n      reactive,\n      ref\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ArrowDown","UserFilled","useAuthenticationState","useRouter","useUser","onMounted","reactive","ref","isAuth","router","User","userObj","user","setInterval","value","state","ToLogin","push","path","ToRegister","Logout","logout"],"sources":["D:/PersonalFile/WebStudy/myShop-vue/myshop-vue/src/components/UserButton.vue"],"sourcesContent":["<template>\r\n    <el-dropdown>\r\n        <el-button type=\"primary\" size=\"large\" class=\"media-user\">\r\n            <el-icon>\r\n                <UserFilled />\r\n            </el-icon>\r\n            <el-icon class=\"el-icon--right\" size=\"large\">\r\n                <ArrowDown />\r\n            </el-icon>\r\n        </el-button>\r\n\r\n        <template #dropdown>\r\n            <el-dropdown-menu>\r\n                <template v-if=\"isAuth.state === false\">\r\n                    <el-dropdown-item @click=\"ToLogin\">登录</el-dropdown-item>\r\n                    <el-dropdown-item @click=\"ToRegister\">注册</el-dropdown-item>\r\n                </template>\r\n\r\n                <template v-if=\"isAuth.state === true\">\r\n                    <el-dropdown-item>用户中心</el-dropdown-item>\r\n                    <el-dropdown-item>订单</el-dropdown-item>\r\n\r\n                    <template v-if=\"userObj.userRole === 'Admin'\">\r\n                        <el-dropdown-item>管理面板</el-dropdown-item>\r\n                    </template>\r\n\r\n                    <el-dropdown-item @click=\"Logout\">退出账号</el-dropdown-item>\r\n                </template>\r\n\r\n            </el-dropdown-menu>\r\n        </template>\r\n    </el-dropdown>\r\n</template>\r\n\r\n<script setup>\r\nimport { ArrowDown, UserFilled } from \"@element-plus/icons-vue\";\r\nimport useAuthenticationState from '@/hook/auth/useAuthenticationState'\r\nimport { useRouter } from \"vue-router\"\r\nimport useUser from '@/stores/useUser'\r\nimport { onMounted, reactive, ref } from \"vue\";\r\n\r\nconst isAuth = ref(useAuthenticationState())\r\nconst router = useRouter();\r\nconst User = useUser();\r\nconst userObj = reactive(User.user);\r\n\r\nonMounted(() => {\r\n    setInterval(() => {\r\n        isAuth.value.state = ref(useAuthenticationState()).value.state\r\n    }, 700)\r\n})\r\n\r\nfunction ToLogin() {\r\n    router.push({\r\n        path: '/login'\r\n    })\r\n}\r\n\r\nfunction ToRegister() {\r\n    router.push({\r\n        path: '/register'\r\n    })\r\n}\r\n\r\nasync function Logout() {\r\n    await User.logout();\r\n    router.push({\r\n        path: '/login'\r\n    })\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.media-user {\r\n    margin: 15px;\r\n}\r\n</style>"],"mappings":";AAmCA,SAASA,SAAS,EAAEC,UAAU,QAAQ,yBAAyB;AAC/D,OAAOC,sBAAsB,MAAM,oCAAoC;AACvE,SAASC,SAAS,QAAQ,YAAY;AACtC,OAAOC,OAAO,MAAM,kBAAkB;AACtC,SAASC,SAAS,EAAEC,QAAQ,EAAEC,GAAG,QAAQ,KAAK;;;;;;;IAE9C,MAAMC,MAAM,GAAGD,GAAG,CAACL,sBAAsB,CAAC,CAAC,CAAC;IAC5C,MAAMO,MAAM,GAAGN,SAAS,CAAC,CAAC;IAC1B,MAAMO,IAAI,GAAGN,OAAO,CAAC,CAAC;IACtB,MAAMO,OAAO,GAAGL,QAAQ,CAACI,IAAI,CAACE,IAAI,CAAC;IAEnCP,SAAS,CAAC,MAAM;MACZQ,WAAW,CAAC,MAAM;QACdL,MAAM,CAACM,KAAK,CAACC,KAAK,GAAGR,GAAG,CAACL,sBAAsB,CAAC,CAAC,CAAC,CAACY,KAAK,CAACC,KAAK;MAClE,CAAC,EAAE,GAAG,CAAC;IACX,CAAC,CAAC;IAEF,SAASC,OAAOA,CAAA,EAAG;MACfP,MAAM,CAACQ,IAAI,CAAC;QACRC,IAAI,EAAE;MACV,CAAC,CAAC;IACN;IAEA,SAASC,UAAUA,CAAA,EAAG;MAClBV,MAAM,CAACQ,IAAI,CAAC;QACRC,IAAI,EAAE;MACV,CAAC,CAAC;IACN;IAEA,eAAeE,MAAMA,CAAA,EAAG;MACpB,MAAMV,IAAI,CAACW,MAAM,CAAC,CAAC;MACnBZ,MAAM,CAACQ,IAAI,CAAC;QACRC,IAAI,EAAE;MACV,CAAC,CAAC;IACN"},"metadata":{},"sourceType":"module","externalDependencies":[]}