{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-7cb41050\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"search-body\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_autocomplete = _resolveComponent(\"el-autocomplete\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_el_autocomplete, {\n    modelValue: $setup.searchText,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.searchText = $event),\n    style: {\n      \"width\": \"100%\"\n    },\n    class: \"media-search inline-input\",\n    size: \"large\",\n    \"fetch-suggestions\": $setup.querySearch,\n    \"trigger-on-focus\": false,\n    placeholder: \"请输入想要的商品\",\n    \"suffix-icon\": $setup.Search,\n    onSelect: $setup.handleSelect,\n    \"select-when-unmatched\": \"\",\n    clearable: \"\"\n  }, null, 8 /* PROPS */, [\"modelValue\", \"suffix-icon\"])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_el_autocomplete","$setup","searchText","$event","style","size","querySearch","placeholder","Search","onSelect","handleSelect","clearable"],"sources":["D:\\PersonalFile\\WebStudy\\myShop-vue\\myshop-vue\\src\\components\\Search.vue"],"sourcesContent":["<template>\r\n    <div class=\"search-body\">\r\n        <el-autocomplete v-model=\"searchText\" style=\"width: 100%;\" class=\"media-search inline-input\" size=\"large\"\r\n            :fetch-suggestions=\"querySearch\" :trigger-on-focus=\"false\" placeholder=\"请输入想要的商品\" :suffix-icon=\"Search\"\r\n            @select=\"handleSelect\" select-when-unmatched clearable>\r\n\r\n        </el-autocomplete>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from \"vue\";\r\nimport { Search } from '@element-plus/icons-vue'\r\nimport { useRouter } from \"vue-router\";\r\nimport useProductList from \"@/stores/useProductList\";\r\nimport router from \"@/router\";\r\n\r\nconst ProductList = useProductList();\r\nconst Router = useRouter();\r\n\r\nconst searchText = ref(\"\");\r\nconst suggestions = ref([]);\r\n\r\nconst createFilter = (queryString) => {\r\n    return (suggestion) => {\r\n        return (\r\n            suggestion.value.toLowerCase().indexOf(queryString.toLowerCase()) === 0\r\n        )\r\n    }\r\n}\r\n\r\nconst querySearch = async (queryString, cb) => {\r\n    suggestions.value = await ProductList.GetProductSearchSuggestions(queryString);\r\n\r\n    const suggestionsWithId = suggestions.value.data.map((value, index) => ({\r\n        id: index + 1,\r\n        value: value\r\n    }));\r\n\r\n    const results = queryString ? suggestionsWithId.filter(createFilter(queryString)) : suggestionsWithId;\r\n\r\n    cb(results);\r\n}\r\n\r\nasync function handleSelect(selectItem) {\r\n    await ProductList.getProductBySearch(selectItem.value);\r\n\r\n    router.push({\r\n        path: `/product/search/${selectItem.value}`\r\n    });\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.search-body {\r\n    margin: 15px;\r\n}\r\n</style>"],"mappings":";;;EACSA,KAAK,EAAC;AAAa;;;uBAAxBC,mBAAA,CAMM,OANNC,UAMM,GALFC,YAAA,CAIkBC,0BAAA;gBAJQC,MAAA,CAAAC,UAAU;+DAAVD,MAAA,CAAAC,UAAU,GAAAC,MAAA;IAAEC,KAAoB,EAApB;MAAA;IAAA,CAAoB;IAACR,KAAK,EAAC,2BAA2B;IAACS,IAAI,EAAC,OAAO;IACpG,mBAAiB,EAAEJ,MAAA,CAAAK,WAAW;IAAG,kBAAgB,EAAE,KAAK;IAAEC,WAAW,EAAC,UAAU;IAAE,aAAW,EAAEN,MAAA,CAAAO,MAAM;IACrGC,QAAM,EAAER,MAAA,CAAAS,YAAY;IAAE,uBAAqB,EAArB,EAAqB;IAACC,SAAS,EAAT"},"metadata":{},"sourceType":"module","externalDependencies":[]}