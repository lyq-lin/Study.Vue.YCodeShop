{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { unref as _unref, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-60bd3d6f\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  class: \"change-password\"\n};\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h3\", null, \"修改密码\", -1));\nconst _hoisted_4 = {\n  class: \"password\"\n};\nconst _hoisted_5 = {\n  class: \"confirm-password\"\n};\nimport useUser from \"@/stores/useUser\";\nimport { reactive } from \"vue\";\nimport { useRouter } from \"vue-router\";\nexport default {\n  __name: 'Profile',\n  setup(__props) {\n    const User = useUser();\n    const router = useRouter();\n    const changePassord = reactive({\n      password: \"\",\n      confirmPassword: \"\"\n    });\n    async function ToChangePassword() {\n      if (changePassord.password === \"\" || changePassord.password === undefined) {\n        alert(\"密码不能为空!\");\n        return;\n      }\n      if (changePassord.password !== changePassord.confirmPassword) {\n        alert(\"两次密码输入不一致!\");\n        return;\n      }\n      const result = await User.changePassword(changePassord.password);\n      if (result === true) {\n        localStorage.removeItem(\"authToken\");\n        User.isLoggedIn = false;\n        alert(\"修改成功!请重新登录!\");\n        router.push({\n          path: '/product/feature'\n        });\n      } else {\n        alert(\"修改失败\");\n      }\n    }\n    return (_ctx, _cache) => {\n      const _component_el_input = _resolveComponent(\"el-input\");\n      const _component_el_button = _resolveComponent(\"el-button\");\n      return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"h1\", null, [_createTextVNode(\"你好!欢迎登录YCodeShop网站! \"), _createElementVNode(\"i\", null, _toDisplayString(_unref(User).user.userName), 1)]), _createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _createElementVNode(\"div\", _hoisted_4, [_createVNode(_component_el_input, {\n        modelValue: changePassord.password,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => changePassord.password = $event),\n        type: \"password\",\n        placeholder: \"请输入新密码\",\n        size: \"large\",\n        \"show-password\": \"\"\n      }, null, 8, [\"modelValue\"])]), _createElementVNode(\"div\", _hoisted_5, [_createVNode(_component_el_input, {\n        modelValue: changePassord.confirmPassword,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => changePassord.confirmPassword = $event),\n        type: \"password\",\n        placeholder: \"请再次输入密码\",\n        size: \"large\",\n        \"show-password\": \"\"\n      }, null, 8, [\"modelValue\"])]), _createVNode(_component_el_button, {\n        color: \"#626aef\",\n        size: \"large\",\n        class: \"ChangePasswordButton\",\n        onClick: ToChangePassword\n      }, {\n        default: _withCtx(() => [_createTextVNode(\" 修改密码 \")]),\n        _: 1\n      })])])], 64);\n    };\n  }\n};","map":{"version":3,"names":["useUser","reactive","useRouter","User","router","changePassord","password","confirmPassword","ToChangePassword","undefined","alert","result","changePassword","localStorage","removeItem","isLoggedIn","push","path"],"sources":["D:/PersonalFile/WebStudy/myShop-vue/myshop-vue/src/pages/Profile/Profile.vue"],"sourcesContent":["<template>\r\n    <h1>你好!欢迎登录YCodeShop网站! <i>{{ User.user.userName }}</i></h1>\r\n\r\n    <div class=\"container\">\r\n        <div class=\"change-password\">\r\n            <h3>修改密码</h3>\r\n            <div class=\"password\">\r\n                <el-input v-model=\"changePassord.password\" type=\"password\" placeholder=\"请输入新密码\" size=\"large\"\r\n                    show-password></el-input>\r\n            </div>\r\n\r\n            <div class=\"confirm-password\">\r\n                <el-input v-model=\"changePassord.confirmPassword\" type=\"password\" placeholder=\"请再次输入密码\" size=\"large\"\r\n                    show-password></el-input>\r\n            </div>\r\n\r\n            <el-button color=\"#626aef\" size=\"large\" class=\"ChangePasswordButton\" @click=\"ToChangePassword\">\r\n                修改密码\r\n            </el-button>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport useUser from \"@/stores/useUser\";\r\nimport { reactive } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\n\r\nconst User = useUser();\r\nconst router = useRouter();\r\n\r\nconst changePassord = reactive({\r\n    password: \"\",\r\n    confirmPassword: \"\"\r\n})\r\n\r\nasync function ToChangePassword() {\r\n    if (changePassord.password === \"\" || changePassord.password === undefined) {\r\n        alert(\"密码不能为空!\");\r\n        return;\r\n    }\r\n\r\n    if (changePassord.password !== changePassord.confirmPassword) {\r\n        alert(\"两次密码输入不一致!\");\r\n        return;\r\n    }\r\n\r\n    const result = await User.changePassword(changePassord.password);\r\n\r\n    if (result === true) {\r\n        localStorage.removeItem(\"authToken\");\r\n        User.isLoggedIn = false;\r\n        alert(\"修改成功!请重新登录!\");\r\n        router.push({\r\n            path: '/product/feature'\r\n        })\r\n    } else {\r\n        alert(\"修改失败\")\r\n    }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n    width: 95%;\r\n    margin: 20px;\r\n}\r\n\r\n.change-password>div {\r\n    width: 50%;\r\n    margin: 15px;\r\n}\r\n\r\n.ChangePasswordButton {\r\n    margin: 20px;\r\n}\r\n</style>"],"mappings":";;;;;;;;;;;;;;;;AAwBA,OAAOA,OAAO,MAAM,kBAAkB;AACtC,SAASC,QAAQ,QAAQ,KAAK;AAC9B,SAASC,SAAS,QAAQ,YAAY;;;;IAEtC,MAAMC,IAAI,GAAGH,OAAO,CAAC,CAAC;IACtB,MAAMI,MAAM,GAAGF,SAAS,CAAC,CAAC;IAE1B,MAAMG,aAAa,GAAGJ,QAAQ,CAAC;MAC3BK,QAAQ,EAAE,EAAE;MACZC,eAAe,EAAE;IACrB,CAAC,CAAC;IAEF,eAAeC,gBAAgBA,CAAA,EAAG;MAC9B,IAAIH,aAAa,CAACC,QAAQ,KAAK,EAAE,IAAID,aAAa,CAACC,QAAQ,KAAKG,SAAS,EAAE;QACvEC,KAAK,CAAC,SAAS,CAAC;QAChB;MACJ;MAEA,IAAIL,aAAa,CAACC,QAAQ,KAAKD,aAAa,CAACE,eAAe,EAAE;QAC1DG,KAAK,CAAC,YAAY,CAAC;QACnB;MACJ;MAEA,MAAMC,MAAM,GAAG,MAAMR,IAAI,CAACS,cAAc,CAACP,aAAa,CAACC,QAAQ,CAAC;MAEhE,IAAIK,MAAM,KAAK,IAAI,EAAE;QACjBE,YAAY,CAACC,UAAU,CAAC,WAAW,CAAC;QACpCX,IAAI,CAACY,UAAU,GAAG,KAAK;QACvBL,KAAK,CAAC,aAAa,CAAC;QACpBN,MAAM,CAACY,IAAI,CAAC;UACRC,IAAI,EAAE;QACV,CAAC,CAAC;MACN,CAAC,MAAM;QACHP,KAAK,CAAC,MAAM,CAAC;MACjB;IACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}