{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createVNode as _createVNode, vShow as _vShow, withDirectives as _withDirectives, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-5567c8dd\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"media\"\n};\nconst _hoisted_2 = {\n  class: \"media-img-wrapper\"\n};\nconst _hoisted_3 = [\"src\", \"alt\"];\nconst _hoisted_4 = {\n  class: \"media-body\"\n};\nconst _hoisted_5 = {\n  key: 0,\n  class: \"text-muted original-price\"\n};\nconst _hoisted_6 = {\n  class: \"price\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_radio = _resolveComponent(\"el-radio\");\n  const _component_el_radio_group = _resolveComponent(\"el-radio-group\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  return _withDirectives((_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"img\", {\n    class: \"media-img\",\n    src: $setup.product.imageUrl,\n    alt: $setup.product.title\n  }, null, 8 /* PROPS */, _hoisted_3)]), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"h2\", null, _toDisplayString($setup.product.title), 1 /* TEXT */), _createElementVNode(\"p\", null, _toDisplayString($setup.product.description), 1 /* TEXT */), $setup.product.variants != null && $setup.product.variants.length > 1 ? (_openBlock(), _createBlock(_component_el_radio_group, {\n    key: 0,\n    modelValue: $setup.currentTypeId,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.currentTypeId = $event),\n    class: \"ml-4\"\n  }, {\n    default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.productTypes, productType => {\n      return _openBlock(), _createBlock(_component_el_radio, {\n        key: productType.id,\n        label: productType.id\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString(productType.name), 1 /* TEXT */)]),\n\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"label\"]);\n    }), 128 /* KEYED_FRAGMENT */))]),\n\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"])) : _createCommentVNode(\"v-if\", true), $setup.GetSelectedProdcutVariant() != null ? (_openBlock(), _createElementBlock(_Fragment, {\n    key: 1\n  }, [$setup.GetSelectedProdcutVariant().originalPrice > $setup.GetSelectedProdcutVariant().price ? (_openBlock(), _createElementBlock(\"h6\", _hoisted_5, \" 原价：￥\" + _toDisplayString($setup.GetSelectedProdcutVariant().originalPrice), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"h4\", _hoisted_6, \" 到手价：￥\" + _toDisplayString($setup.GetSelectedProdcutVariant().price), 1 /* TEXT */)], 64 /* STABLE_FRAGMENT */)) : _createCommentVNode(\"v-if\", true), _createVNode(_component_el_button, {\n    color: \"#626aef\",\n    icon: $setup.ShoppingCart,\n    onClick: _ctx.AddToCart\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"加入购物车\")]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"icon\", \"onClick\"])])], 512 /* NEED_PATCH */)), [[_vShow, $setup.product != null]]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","src","$setup","product","imageUrl","alt","title","_hoisted_4","_toDisplayString","description","variants","length","_createBlock","_component_el_radio_group","currentTypeId","$event","_Fragment","_renderList","productTypes","productType","_component_el_radio","key","id","label","name","GetSelectedProdcutVariant","originalPrice","price","_hoisted_5","_hoisted_6","_createVNode","_component_el_button","color","icon","ShoppingCart","onClick","_ctx","AddToCart"],"sources":["D:\\PersonalFile\\WebStudy\\myShop-vue\\myshop-vue\\src\\pages\\ProductDetail\\ProductDetail.vue"],"sourcesContent":["<template>\r\n    <div class=\"media\" v-show=\"product != null\">\r\n        <div class=\"media-img-wrapper\">\r\n            <img class=\"media-img\" :src=\"product.imageUrl\" :alt=\"product.title\" />\r\n        </div>\r\n\r\n        <div class=\"media-body\">\r\n            <h2>{{ product.title }}</h2>\r\n            <p>{{ product.description }}</p>\r\n\r\n            <template v-if=\"product.variants != null && product.variants.length > 1\">\r\n                <el-radio-group v-model=\"currentTypeId\" class=\"ml-4\">\r\n                    <el-radio v-for=\"productType in productTypes\" :key=\"productType.id\" :label=\"productType.id\">\r\n                        {{ productType.name }}\r\n                    </el-radio>\r\n                </el-radio-group>\r\n            </template>\r\n\r\n            <template v-if=\"GetSelectedProdcutVariant() != null\">\r\n                <template v-if=\"GetSelectedProdcutVariant().originalPrice > GetSelectedProdcutVariant().price\">\r\n                    <h6 class=\"text-muted original-price\">\r\n                        原价：￥{{ GetSelectedProdcutVariant().originalPrice }}\r\n                    </h6>\r\n                </template>\r\n\r\n                <h4 class=\"price\">\r\n                    到手价：￥{{ GetSelectedProdcutVariant().price }}\r\n                </h4>\r\n            </template>\r\n\r\n            <el-button color=\"#626aef\" :icon=\"ShoppingCart\" @click=\"AddToCart\">加入购物车</el-button>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport useProductList from \"@/stores/useProductList\";\r\nimport { onMounted, ref } from \"vue\";\r\nimport { useRoute } from \"vue-router\";\r\nimport { ShoppingCart } from '@element-plus/icons-vue'\r\n\r\nconst currentTypeId = ref(\"e84893a3-cad7-4ef3-8f7d-58e090c7f128\");  //默认当前类型的套餐\r\n\r\nconst ProductList = useProductList();\r\nconst route = useRoute();\r\nconst product = ref({})\r\nconst productTypes = ref([])\r\n\r\nonMounted(async () => {\r\n    if (ProductList.Products.length === 0) {\r\n        await ProductList.getAllProduct();\r\n    }\r\n    await ProductList.getProductTypeByProductId(route.params.id);\r\n\r\n    product.value = ProductList.GetProdcutById(route.params.id);\r\n    productTypes.value = ProductList.ProductTypes\r\n\r\n    console.log(product.value)\r\n\r\n    if (product.value.variants.length > 0) {\r\n        var prices = product.value.variants.map(variant => variant.price);\r\n        var minPrice = Math.min(...prices);\r\n\r\n        currentTypeId.value = product.value.variants.find(x => x.price === minPrice).productTypeId;\r\n    }\r\n});\r\n\r\nfunction GetSelectedProdcutVariant() {\r\n    if (product.value.variants != undefined) {\r\n        var variant = product.value.variants.find(v => v.productTypeId == currentTypeId.value)\r\n        return variant;\r\n    }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.media {\r\n    display: flex;\r\n}\r\n\r\n.media-img {\r\n    max-height: 500px;\r\n    max-width: 500px;\r\n    border-radius: 6px;\r\n    margin: 0 10px 10px 10px;\r\n}\r\n\r\n.media-img-wrapper {\r\n    max-width: 500px;\r\n    max-height: 500px;\r\n    text-align: center;\r\n    flex: 1;\r\n}\r\n\r\n.media-body {\r\n    flex: 1;\r\n}\r\n\r\n.original-price {\r\n    text-decoration: line-through;\r\n}\r\n\r\n.price {\r\n    color: green;\r\n}\r\n</style>"],"mappings":";;;EACSA,KAAK,EAAC;AAAO;;EACTA,KAAK,EAAC;AAAmB;;;EAIzBA,KAAK,EAAC;AAAY;;;EAcPA,KAAK,EAAC;;;EAKVA,KAAK,EAAC;AAAO;;;;;wCAxB7BC,mBAAA,CA+BM,OA/BNC,UA+BM,GA9BFC,mBAAA,CAEM,OAFNC,UAEM,GADFD,mBAAA,CAAsE;IAAjEH,KAAK,EAAC,WAAW;IAAEK,GAAG,EAAEC,MAAA,CAAAC,OAAO,CAACC,QAAQ;IAAGC,GAAG,EAAEH,MAAA,CAAAC,OAAO,CAACG;yCAGjEP,mBAAA,CAyBM,OAzBNQ,UAyBM,GAxBFR,mBAAA,CAA4B,YAAAS,gBAAA,CAArBN,MAAA,CAAAC,OAAO,CAACG,KAAK,kBACpBP,mBAAA,CAAgC,WAAAS,gBAAA,CAA1BN,MAAA,CAAAC,OAAO,CAACM,WAAW,kBAETP,MAAA,CAAAC,OAAO,CAACO,QAAQ,YAAYR,MAAA,CAAAC,OAAO,CAACO,QAAQ,CAACC,MAAM,Q,cAC/DC,YAAA,CAIiBC,yBAAA;;gBAJQX,MAAA,CAAAY,aAAa;+DAAbZ,MAAA,CAAAY,aAAa,GAAAC,MAAA;IAAEnB,KAAK,EAAC;;sBAChC,MAAmC,E,kBAA7CC,mBAAA,CAEWmB,SAAA,QAAAC,WAAA,CAFqBf,MAAA,CAAAgB,YAAY,EAA3BC,WAAW;2BAA5BP,YAAA,CAEWQ,mBAAA;QAFoCC,GAAG,EAAEF,WAAW,CAACG,EAAE;QAAGC,KAAK,EAAEJ,WAAW,CAACG;;0BACpF,MAAsB,C,kCAAnBH,WAAW,CAACK,IAAI,iB;;;;;;;0EAKftB,MAAA,CAAAuB,yBAAyB,c,cAAzC5B,mBAAA,CAUWmB,SAAA;IAAAK,GAAA;EAAA,IATSnB,MAAA,CAAAuB,yBAAyB,GAAGC,aAAa,GAAGxB,MAAA,CAAAuB,yBAAyB,GAAGE,KAAK,I,cACzF9B,mBAAA,CAEK,MAFL+B,UAEK,EAFiC,OAC9B,GAAApB,gBAAA,CAAGN,MAAA,CAAAuB,yBAAyB,GAAGC,aAAa,oB,mCAIxD3B,mBAAA,CAEK,MAFL8B,UAEK,EAFa,QACT,GAAArB,gBAAA,CAAGN,MAAA,CAAAuB,yBAAyB,GAAGE,KAAK,iB,kEAIjDG,YAAA,CAAoFC,oBAAA;IAAzEC,KAAK,EAAC,SAAS;IAAEC,IAAI,EAAE/B,MAAA,CAAAgC,YAAY;IAAGC,OAAK,EAAEC,IAAA,CAAAC;;sBAAW,MAAK,C,iBAAL,OAAK,E;;+EA7BrDnC,MAAA,CAAAC,OAAO,U"},"metadata":{},"sourceType":"module","externalDependencies":[]}