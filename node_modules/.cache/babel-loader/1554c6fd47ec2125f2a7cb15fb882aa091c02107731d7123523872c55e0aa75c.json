{"ast":null,"code":"import { createVNode as _createVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createTextVNode as _createTextVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createBlock as _createBlock } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_dropdown_item = _resolveComponent(\"el-dropdown-item\");\n  const _component_el_dropdown_menu = _resolveComponent(\"el-dropdown-menu\");\n  const _component_el_dropdown = _resolveComponent(\"el-dropdown\");\n  return _openBlock(), _createBlock(_component_el_dropdown, null, {\n    dropdown: _withCtx(() => [_createVNode(_component_el_dropdown_menu, null, {\n      default: _withCtx(() => [$setup.isAuth.state === false ? (_openBlock(), _createElementBlock(_Fragment, {\n        key: 0\n      }, [_createVNode(_component_el_dropdown_item, {\n        onClick: $setup.ToLogin\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"登录\")]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_dropdown_item, {\n        onClick: $setup.ToRegister\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"注册\")]),\n        _: 1 /* STABLE */\n      })], 64 /* STABLE_FRAGMENT */)) : _createCommentVNode(\"v-if\", true), $setup.isAuth.state === true ? (_openBlock(), _createElementBlock(_Fragment, {\n        key: 1\n      }, [_createVNode(_component_el_dropdown_item, {\n        onClick: $setup.ToProfile\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"用户中心\")]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_dropdown_item, null, {\n        default: _withCtx(() => [_createTextVNode(\"订单\")]),\n        _: 1 /* STABLE */\n      }), $setup.userObj.userRole === 'Admin' ? (_openBlock(), _createBlock(_component_el_dropdown_item, {\n        key: 0\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"管理面板\")]),\n        _: 1 /* STABLE */\n      })) : _createCommentVNode(\"v-if\", true), _createVNode(_component_el_dropdown_item, {\n        onClick: $setup.Logout\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"退出账号\")]),\n        _: 1 /* STABLE */\n      })], 64 /* STABLE_FRAGMENT */)) : _createCommentVNode(\"v-if\", true)]),\n      _: 1 /* STABLE */\n    })]),\n\n    default: _withCtx(() => [_createVNode(_component_el_button, {\n      type: \"primary\",\n      size: \"large\",\n      class: \"media-user\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n        default: _withCtx(() => [_createVNode($setup[\"UserFilled\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_icon, {\n        class: \"el-icon--right\",\n        size: \"large\"\n      }, {\n        default: _withCtx(() => [_createVNode($setup[\"ArrowDown\"])]),\n        _: 1 /* STABLE */\n      })]),\n\n      _: 1 /* STABLE */\n    })]),\n\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["_createBlock","_component_el_dropdown","dropdown","_withCtx","_createVNode","_component_el_dropdown_menu","$setup","isAuth","state","_createElementBlock","_Fragment","key","_component_el_dropdown_item","onClick","ToLogin","ToRegister","ToProfile","userObj","userRole","Logout","_component_el_button","type","size","class","_component_el_icon"],"sources":["D:\\PersonalFile\\WebStudy\\myShop-vue\\myshop-vue\\src\\components\\UserButton.vue"],"sourcesContent":["<template>\r\n    <el-dropdown>\r\n        <el-button type=\"primary\" size=\"large\" class=\"media-user\">\r\n            <el-icon>\r\n                <UserFilled />\r\n            </el-icon>\r\n            <el-icon class=\"el-icon--right\" size=\"large\">\r\n                <ArrowDown />\r\n            </el-icon>\r\n        </el-button>\r\n\r\n        <template #dropdown>\r\n            <el-dropdown-menu>\r\n                <template v-if=\"isAuth.state === false\">\r\n                    <el-dropdown-item @click=\"ToLogin\">登录</el-dropdown-item>\r\n                    <el-dropdown-item @click=\"ToRegister\">注册</el-dropdown-item>\r\n                </template>\r\n\r\n                <template v-if=\"isAuth.state === true\">\r\n                    <el-dropdown-item @click=\"ToProfile\">用户中心</el-dropdown-item>\r\n                    <el-dropdown-item>订单</el-dropdown-item>\r\n\r\n                    <template v-if=\"userObj.userRole === 'Admin'\">\r\n                        <el-dropdown-item>管理面板</el-dropdown-item>\r\n                    </template>\r\n\r\n                    <el-dropdown-item @click=\"Logout\">退出账号</el-dropdown-item>\r\n                </template>\r\n\r\n            </el-dropdown-menu>\r\n        </template>\r\n    </el-dropdown>\r\n</template>\r\n\r\n<script setup>\r\nimport { ArrowDown, UserFilled } from \"@element-plus/icons-vue\";\r\nimport useAuthenticationState from '@/hook/auth/useAuthenticationState'\r\nimport { useRouter } from \"vue-router\"\r\nimport useUser from '@/stores/useUser'\r\nimport { onMounted, reactive, ref } from \"vue\";\r\nimport useCart from \"@/stores/useCart\";\r\n\r\nconst isAuth = ref(useAuthenticationState())\r\nconst router = useRouter();\r\nconst User = useUser();\r\nconst userObj = reactive(User.user);\r\nconst Cart = useCart();\r\n\r\nonMounted(() => {\r\n    setInterval(() => {\r\n        isAuth.value.state = ref(useAuthenticationState()).value.state\r\n    }, 700)\r\n})\r\n\r\nfunction ToLogin() {\r\n    router.push({\r\n        path: '/login'\r\n    })\r\n}\r\n\r\nfunction ToRegister() {\r\n    router.push({\r\n        path: '/register'\r\n    })\r\n}\r\n\r\nasync function Logout() {\r\n    await User.logout();\r\n    Cart.Cart = [];\r\n    Cart.CartProduct = [];\r\n    router.push({\r\n        path: '/login'\r\n    })\r\n}\r\n\r\nfunction ToProfile() {\r\n    router.push({\r\n        path: '/profile'\r\n    })\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.media-user {\r\n    margin: 15px;\r\n}\r\n</style>"],"mappings":";;;;;;;uBACIA,YAAA,CA8BcC,sBAAA;IApBCC,QAAQ,EAAAC,QAAA,CACf,MAiBmB,CAjBnBC,YAAA,CAiBmBC,2BAAA;wBAhBf,MAGW,CAHKC,MAAA,CAAAC,MAAM,CAACC,KAAK,c,cAA5BC,mBAAA,CAGWC,SAAA;QAAAC,GAAA;MAAA,IAFPP,YAAA,CAAwDQ,2BAAA;QAArCC,OAAK,EAAEP,MAAA,CAAAQ;MAAO;0BAAE,MAAE,C,iBAAF,IAAE,E;;UACrCV,YAAA,CAA2DQ,2BAAA;QAAxCC,OAAK,EAAEP,MAAA,CAAAS;MAAU;0BAAE,MAAE,C,iBAAF,IAAE,E;;2EAG5BT,MAAA,CAAAC,MAAM,CAACC,KAAK,a,cAA5BC,mBAAA,CASWC,SAAA;QAAAC,GAAA;MAAA,IARPP,YAAA,CAA4DQ,2BAAA;QAAzCC,OAAK,EAAEP,MAAA,CAAAU;MAAS;0BAAE,MAAI,C,iBAAJ,MAAI,E;;UACzCZ,YAAA,CAAuCQ,2BAAA;0BAArB,MAAE,C,iBAAF,IAAE,E;;UAEJN,MAAA,CAAAW,OAAO,CAACC,QAAQ,gB,cAC5BlB,YAAA,CAAyCY,2BAAA;QAAAD,GAAA;MAAA;0BAAvB,MAAI,C,iBAAJ,MAAI,E;;+CAG1BP,YAAA,CAAyDQ,2BAAA;QAAtCC,OAAK,EAAEP,MAAA,CAAAa;MAAM;0BAAE,MAAI,C,iBAAJ,MAAI,E;;;;;;sBAxBlD,MAOY,CAPZf,YAAA,CAOYgB,oBAAA;MAPDC,IAAI,EAAC,SAAS;MAACC,IAAI,EAAC,OAAO;MAACC,KAAK,EAAC;;wBACzC,MAEU,CAFVnB,YAAA,CAEUoB,kBAAA;0BADN,MAAc,CAAdpB,YAAA,CAAcE,MAAA,gB;;UAElBF,YAAA,CAEUoB,kBAAA;QAFDD,KAAK,EAAC,gBAAgB;QAACD,IAAI,EAAC;;0BACjC,MAAa,CAAblB,YAAA,CAAaE,MAAA,e"},"metadata":{},"sourceType":"module","externalDependencies":[]}